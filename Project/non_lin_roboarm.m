function Xdot = non_lin_roboarm(t, Xnl, T, sl1, sl2, sm1, sm2, sg, sc1, sc2)
    u2 = T(2);
    u1 = T(1);  

    x1 = Xnl(1);
    x2 = Xnl(2);
    x3 = Xnl(3);
    x4 = Xnl(4);

    Xdot = [ Xnl(2);
            (3*(4*sl2*u1 - 4*sl2*u2 - 6*sl1*u2*cos(x3) - 4*sc1*sl2*x2 + ...
            4*sc2*sl2*x4 + 6*sc2*sl1*x4*cos(x3) - 2*sg*sl1*sl2*sm1*cos(x1) ...
            - 4*sg*sl1*sl2*sm2*cos(x1) + 2*sl1*sl2^2*sm2*x2^2*sin(x3) +...
            2*sl1*sl2^2*sm2*x4^2*sin(x3) + 3*sl1^2*sl2*sm2*x2^2*cos(x3)*sin(x3)...
            + 3*sg*sl1*sl2*sm2*cos(x1 + x3)*cos(x3) + ...
            4*sl1*sl2^2*sm2*x2*x4*sin(x3)))/(4*sl1^2*sl2*sm1 + ...
        12*sl1^2*sl2*sm2 - 9*sl1^2*sl2*sm2*cos(x3)^2);
             Xnl(4);
            -(3*(4*sl2^2*sm2*u1 - 12*sl1^2*sm2*u2 - 4*sl1^2*sm1*u2 - ...
            4*sl2^2*sm2*u2 - 4*sc1*sl2^2*sm2*x2 + 4*sc2*sl1^2*sm1*x4 + ...
            12*sc2*sl1^2*sm2*x4 + 4*sc2*sl2^2*sm2*x4 + 6*sl1*sl2*sm2*u1*cos(x3) ...
            - 12*sl1*sl2*sm2*u2*cos(x3) + 2*sl1*sl2^3*sm2^2*x2^2*sin(x3) + ...
            6*sl1^3*sl2*sm2^2*x2^2*sin(x3) + 2*sl1*sl2^3*sm2^2*x4^2*sin(x3) + ...
            6*sg*sl1^2*sl2*sm2^2*cos(x1 + x3) - 4*sg*sl1*sl2^2*sm2^2*cos(x1) + ...
            2*sl1^3*sl2*sm1*sm2*x2^2*sin(x3) + 4*sl1*sl2^3*sm2^2*x2*x4*sin(x3) + ...
            6*sl1^2*sl2^2*sm2^2*x2^2*cos(x3)*sin(x3) + 3*sl1^2*sl2^2*sm2^2*x4^2*cos(x3)*sin(x3) ...
            + 3*sg*sl1*sl2^2*sm2^2*cos(x1 + x3)*cos(x3) - 6*sc1*sl1*sl2*sm2*x2*cos(x3) + ...
            12*sc2*sl1*sl2*sm2*x4*cos(x3) - 6*sg*sl1^2*sl2*sm2^2*cos(x1)*cos(x3) + ...
            2*sg*sl1^2*sl2*sm1*sm2*cos(x1 + x3) - 2*sg*sl1*sl2^2*sm1*sm2*cos(x1) + ...
            6*sl1^2*sl2^2*sm2^2*x2*x4*cos(x3)*sin(x3) - 3*sg*sl1^2*sl2*sm1*sm2*cos(x1)*cos(x3)))...
            /(12*sl1^2*sl2^2*sm2^2 - 9*sl1^2*sl2^2*sm2^2*cos(x3)^2 + 4*sl1^2*sl2^2*sm1*sm2)];
end

